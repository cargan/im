<html>
<body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script>
jQuery(function(){
var Colors = [
    '#00A0B0',
    '#6A4A3C',
    '#CC333F',
    '#EB6841',
    '#EDC951',
    '#7DBE3C',
    '#BE7D3C',
    '#6A4A3C'
];

var graph = new Springy.Graph();
$.get('/data/map.json', function(result) {
    var nodes = {};
    result.nodes.forEach(function(val, key) {
        nodes[val] = graph.newNode({label: val});
    });

    result.edges.forEach(function(val, key) {
        graph.newEdge(
            nodes[val.from],
            nodes[val.to],
            {
                color: Colors[key],
                label: val.weight
            }
        );
    });

  var springy = window.springy = jQuery('#machines').springy({
    graph: graph,
    nodeSelected: function(node){
      console.log('Node selected: ' + JSON.stringify(node.data));
    }
  });

}, 'json');
/*

var Gargzdai = graph.newNode({
    label: 'Gargzdai',
    ondoubleclick: function() { console.log("Hello Gargzdai!"); }
});
var Vezaiciai = graph.newNode({label: 'Vezaiciai'});
var Ezaiciai = graph.newNode({label: 'Ezaiciai'});
var Maciuiciai = graph.newNode({label: 'Maciuiciai'});
var Kvietiniai = graph.newNode({label: 'Kvietiniai'});

graph.newEdge(Gargzdai, Vezaiciai, {color: Colors[0], label: '5Km'});
graph.newEdge(Gargzdai, Ezaiciai, {color: Colors[1]});
graph.newEdge(Gargzdai, Kvietiniai, {color: Colors[2]});
graph.newEdge(Gargzdai, Maciuiciai, {color: Colors[3]});
graph.newEdge(Vezaiciai, Gargzdai, {color: Colors[4]});
graph.newEdge(Maciuiciai, Gargzdai, {color: Colors[5]});
graph.newEdge(Vezaiciai, Maciuiciai, {color: Colors[6]});
graph.newEdge(Vezaiciai, Ezaiciai, {color: Colors[7]});
graph.newEdge(Maciuiciai, Kvietiniai, {color: Colors[8]});

  var springy = window.springy = jQuery('#machines').springy({
    graph: graph,
    nodeSelected: function(node){
      console.log('Node selected: ' + JSON.stringify(node.data));
    }
  });
  */
});

</script>

<div class="controls">
    <form>
        <div>
            <button id="addMachine">Add Machine</button>
            <button id="addKali">Add Kali</button>
            <button id="addEli">Add Eli</button>
            <button id="addEnemy">Add Enemy</button>
        </div>
        <div>
            <label for="Location">Location</label>
            <input type="text" name="Location" value="" id="Location">

            <label for="count">Count</label>
            <input type="text" name="count" value="" id="count">

        </div>
    </form>
</div>

<canvas id="machines" width="1600" height="700" />

<script src="/static/springy.js"></script>
<script src="/static/springyui.js"></script>

</body>
</html>
